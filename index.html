<!doctype html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Homeserver Spec Version Support</title>
  <script src="chart.umd.js"></script>
  <script src="hammer.js"></script>
  <script src="chartjs-plugin-zoom.min.js"></script>
  <script src="chartjs-plugin-datalabels.js"></script>
  <script src="chartjs-adapter-date-fns.bundle.min.js"></script>
  <script src="index.js" defer="true"></script>
  <style>
      div {
          width: 75%;
          margin-left: auto;
          margin-right: auto;
          padding-bottom: 2em;
      }

      .reset-zoom {
          position: absolute;
          margin-left: auto;
          margin-right: 3px;
          margin-top: 10px;
      }
  </style>
</head>

<body>
  <div>
    <h1>Homeserver Spec Versions</h1>

    <p>
      Matrix spec version as reported by various homeservers. This uses the <i>self-reported</i>
      versions for each homeserver and no verification is done whether the version is fully
      supported.
    </p>

    <p>
      Forks are considered from the first commit which is not part of the parent project.
    </p>

    <p>
      Drag or pinch to zoom. Hold shift to pan.
    </p>

    <h3>Maturity</h3>
    <p>
      Limit the displayed homeservers to their maturity.

      <br>

      <input type="checkbox" id="stable" onclick="render();" checked />
      <label for="stable">Stable</label>

      <input type="checkbox" id="beta" onclick="render();" checked />
      <label for="beta">Beta</label>

      <input type="checkbox" id="alpha"onclick="render();" />
      <label for="alpha">Alpha</label>

      <input type="checkbox" id="obsolete" onclick="render();" />
      <label for="obsolete">Obsolete</label>
    </p>

    <h3>Releases to include</h3>
    <p>
      By default, only the spec versions released <i>after</i> a homeserver's first
      release are included. You can look at all data or data after a homeserver's first
      commit using the dropdown below.

      <br>

      <select id="display-type" onchange="render();">
        <option value="all" >All spec releases</option>
        <option value="after_commit">Spec releases after initial project commit</option>
        <option value="after_release" selected>Spec releases after initial project release</option>
      </select>

    </p>
  </div>

  <div>
    <!-- Contains canvas elements for each chart. -->
    <button class="reset-zoom" onclick="resetZoom('days-to-support');">reset zoom</button>
    <canvas id="days-to-support"></canvas>
  </div>

  <div>
    <button class="reset-zoom" onclick="resetZoom('spec-days-vs-support');">reset zoom</button>
    <canvas id="spec-days-vs-support"></canvas>
  </div>

  <div>
    <button class="reset-zoom" onclick="resetZoom('supported-spec-versions-over-time');">reset zoom</button>
    <canvas id="supported-spec-versions-over-time"></canvas>
  </div>

  <div>
    <button class="reset-zoom" onclick="resetZoom('supported-room-versions-over-time');">reset zoom</button>
    <canvas id="supported-room-versions-over-time"></canvas>
  </div>

  <div>
    <button class="reset-zoom" onclick="resetZoom('default-room-versions-over-time');">reset zoom</button>
    <canvas id="default-room-versions-over-time"></canvas>
  </div>
</body>

</html>
